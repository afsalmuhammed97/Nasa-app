package com.afsal.dev.nasaapp.repositoryimport android.util.Logimport androidx.room.withTransactionimport com.afsal.dev.nasaapp.database.PlanteryDatabaseimport com.afsal.dev.nasaapp.helper.Constants.API_KEYimport com.afsal.dev.nasaapp.helper.networkBoundResourceimport com.afsal.dev.nasaapp.network.ApiServiceimport kotlinx.coroutines.delayimport javax.inject.Injectclass AppRepository @Inject constructor( private val apiService: ApiService,                         private val db: PlanteryDatabase) {   // suspend fun getPlaneteryData()=apiService.getPlaneteryData(API_KEY,10)    private val planeteryDao=db.planeteryDao()    fun getAllPlaneteryData()= networkBoundResource(        query = {            planeteryDao.getAllPlaneteryData()        },        fetch = {         apiService.getPlaneteryData(API_KEY,10)        },        saveFetchResult = { planeteryResult->            Log.d("MMM","In Repository code ${planeteryResult.code()}")            Log.d("MMM","In Repository success ${planeteryResult.isSuccessful}")            Log.d("MMM","In Repository body ${planeteryResult.body()}")            val data=planeteryResult.body()            if (planeteryResult.isSuccessful){                planeteryDao.deleteAllPlaneteryData()                planeteryDao.insertPlaneteryData(data!!)            }//            db.withTransaction {//////                    planeteryDao.deleteAllPlaneteryData()//                    planeteryResult.body()?.let {//                        Log.d("MMMM","Db Transaction ${it.toString()}")//                        planeteryDao.insertPlaneteryData(it) }//            }        }    )}